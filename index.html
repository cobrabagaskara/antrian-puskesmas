<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Antrian Puskesmas</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¥</text></svg>">
</head>
<body>
  <h1>ğŸ¥ Sistem Antrian Puskesmas</h1>
  
  <div class="tabs">
    <button class="tab-btn active" data-tab="tab1">ğŸ“Š Pembagian Antrian</button>
    <button class="tab-btn" data-tab="tab2">ğŸ“¢ Pendaftaran & Panggilan</button>
  </div>

  <!-- Tab 1: Pembagian Antrian -->
  <div id="tab1" class="tab-content active">
    <h2>Pembagian Antrian (Aâ€“E)</h2>
    
    <div class="counter-group">
      <!-- Counter A -->
      <div class="counter">
        <span class="counter-label">A:</span>
        <span class="counter-value" id="total-A">0</span>
        <button class="btn-plus" data-letter="A">+</button>
        <button class="btn-minus" data-letter="A">-</button>
        <span class="counter-desc">Umum</span>
      </div>
      
      <!-- Counter B -->
      <div class="counter">
        <span class="counter-label">B:</span>
        <span class="counter-value" id="total-B">0</span>
        <button class="btn-plus" data-letter="B">+</button>
        <button class="btn-minus" data-letter="B">-</button>
        <span class="counter-desc">Anak</span>
      </div>
      
      <!-- Counter C -->
      <div class="counter">
        <span class="counter-label">C:</span>
        <span class="counter-value" id="total-C">0</span>
        <button class="btn-plus" data-letter="C">+</button>
        <button class="btn-minus" data-letter="C">-</button>
        <span class="counter-desc">Gigi</span>
      </div>
      
      <!-- Counter D -->
      <div class="counter">
        <span class="counter-label">D:</span>
        <span class="counter-value" id="total-D">0</span>
        <button class="btn-plus" data-letter="D">+</button>
        <button class="btn-minus" data-letter="D">-</button>
        <span class="counter-desc">KIA</span>
      </div>
      
      <!-- Counter E -->
      <div class="counter">
        <span class="counter-label">E:</span>
        <span class="counter-value" id="total-E">0</span>
        <button class="btn-plus" data-letter="E">+</button>
        <button class="btn-minus" data-letter="E">-</button>
        <div class="online-section">
          <div class="online-label">Online:</div>
          <input type="number" class="online-input" id="online-E" min="0" value="0" placeholder="0">
        </div>
        <span class="counter-desc">Lansia</span>
      </div>
    </div>
    
    <div class="action-buttons">
      <button class="btn reset-btn" id="reset-btn">
        ğŸ”„ Reset Hari Ini
      </button>
      <button class="btn info-btn" id="info-btn">
        â„¹ï¸ Informasi
      </button>
    </div>
    
    <div class="footer-note">
      <p><strong>Keterangan:</strong></p>
      <p>â€¢ <span class="letter-a">A</span>: Umum | <span class="letter-b">B</span>: Anak | <span class="letter-c">C</span>: Gigi | <span class="letter-d">D</span>: KIA | <span class="letter-e">E</span>: Lansia</p>
      <p>â€¢ Antrian E: total = online + loket</p>
      <p>â€¢ Antrian Aâ€“D: hanya loket (mulai dari nomor 1)</p>
    </div>
  </div>

  <!-- Tab 2: Pendaftaran & Panggilan -->
  <div id="tab2" class="tab-content">
    <h2>ğŸ“¢ Pendaftaran â€“ Panggil Antrian</h2>
    
    <div class="call-container">
      <div id="call-A" class="call-box">
        <div class="call-header">
          <span class="letter-icon">A</span>
          <span class="counter-type">Umum</span>
        </div>
        <div class="call-body" id="call-body-A">
          <!-- Akan diisi oleh JavaScript -->
        </div>
      </div>
      
      <div id="call-B" class="call-box">
        <div class="call-header">
          <span class="letter-icon">B</span>
          <span class="counter-type">Anak</span>
        </div>
        <div class="call-body" id="call-body-B">
          <!-- Akan diisi oleh JavaScript -->
        </div>
      </div>
      
      <div id="call-C" class="call-box">
        <div class="call-header">
          <span class="letter-icon">C</span>
          <span class="counter-type">Gigi</span>
        </div>
        <div class="call-body" id="call-body-C">
          <!-- Akan diisi oleh JavaScript -->
        </div>
      </div>
      
      <div id="call-D" class="call-box">
        <div class="call-header">
          <span class="letter-icon">D</span>
          <span class="counter-type">KIA</span>
        </div>
        <div class="call-body" id="call-body-D">
          <!-- Akan diisi oleh JavaScript -->
        </div>
      </div>
      
      <div id="call-E" class="call-box">
        <div class="call-header">
          <span class="letter-icon">E</span>
          <span class="counter-type">Lansia</span>
          <span class="online-badge" id="online-badge">Online: 0</span>
        </div>
        <div class="call-body" id="call-body-E">
          <!-- Akan diisi oleh JavaScript -->
        </div>
      </div>
    </div>
    
    <div class="instructions">
      <h3>ğŸ“‹ Petunjuk Penggunaan:</h3>
      <ol>
        <li>Klik <strong>"Panggil"</strong> pada antrian yang tersedia</li>
        <li>Pasien akan mendengar suara panggilan</li>
        <li>Konfirmasi status pasien: <strong>"Hadir"</strong> atau <strong>"Tidak Hadir"</strong></li>
        <li>Pasien yang tidak hadir akan masuk ke daftar <strong>"Panggil Ulang"</strong></li>
        <li>Gunakan tombol <strong>"Panggil Ulang"</strong> untuk memanggil kembali</li>
      </ol>
    </div>
    
    <div class="current-call-display" id="current-call-display">
      <!-- Menampilkan panggilan saat ini -->
    </div>
  </div>

  <!-- Modal Informasi -->
  <div id="info-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>â„¹ï¸ Informasi Sistem Antrian</h2>
      <div class="modal-body">
        <h3>Fitur Sistem:</h3>
        <ul>
          <li><strong>Pembagian Antrian:</strong> Atur jumlah antrian per kategori</li>
          <li><strong>Antrian Online:</strong> Khusus kategori E (Lansia) bisa online</li>
          <li><strong>Panggilan:</strong> Sistem panggilan dengan suara</li>
          <li><strong>Recall:</strong> Panggil ulang pasien yang tidak hadir</li>
          <li><strong>Reset Otomatis:</strong> Reset setiap hari baru</li>
          <li><strong>Cloud Sync:</strong> Data tersimpan di Firebase (real-time)</li>
        </ul>
        
        <h3>Kategori Antrian:</h3>
        <table class="info-table">
          <tr>
            <th>Kode</th>
            <th>Kategori</th>
            <th>Deskripsi</th>
          </tr>
          <tr>
            <td><span class="letter-a">A</span></td>
            <td>Umum</td>
            <td>Pelayanan umum untuk semua usia</td>
          </tr>
          <tr>
            <td><span class="letter-b">B</span></td>
            <td>Anak</td>
            <td>Pelayanan kesehatan anak</td>
          </tr>
          <tr>
            <td><span class="letter-c">C</span></td>
            <td>Gigi</td>
            <td>Pelayanan kesehatan gigi dan mulut</td>
          </tr>
          <tr>
            <td><span class="letter-d">D</span></td>
            <td>KIA</td>
            <td>Kesehatan Ibu dan Anak</td>
          </tr>
          <tr>
            <td><span class="letter-e">E</span></td>
            <td>Lansia</td>
            <td>Pelayanan khusus lanjut usia</td>
          </tr>
        </table>
        
        <div class="modal-footer">
          <p><strong>Versi:</strong> 2.0 | <strong>Update:</strong> Desember 2024</p>
          <p>Sistem dikembangkan untuk Puskesmas Kedawung dengan teknologi modern</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="app.js"></script>
</body>
</html>
